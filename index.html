<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fit3179_a2.css">
    <title>The Impacts of Climate Change</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <h1 class="centered_title">The Impacts of Climate Change</h1>
  <!-- Container for the visualization -->
  <div class="centered_container">
      <div class="title">
      <h2>Rising Annual Temperatures</h2>
      </div>
      <div class="description">
        <p>Climate change is the leading cause of rising temperatures across the globe, primarily due to the increased concentration of greenhouse gases in the atmosphere. Human activity such as burning fossil fuels and industrial processes have sped
        up this effect tremendously, and as a result causing major disruptions in weather patterns and accelerated melting of polar ice.</p>
      </div>
    <div id="choropleth_map" class="centered_div">
      <script>
        const vis1 = {
          "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
          "title": "Global Annual Surface Temperatures",
          "width": 800,
          "height": 400,
          "params": [
            {
              "name": "Year_selection",
              "value": 2022,
              "bind": {
                "input": "range",
                "min": 1990,
                "max": 2022,
                "step": 1,
                "name": "Year:  "
              }
            }
          ],
          "projection": {"type": "equalEarth"},
          "layer": [
            {
              "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
                "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
              },
              "transform": [
                {
                  "calculate": "'Data is not available in ' + datum.properties.NAME",
                  "as": "note"
                }
              ],
              "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
              "encoding": {"tooltip": {"field": "note"}}
            },
            {
              "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
                "format": {"type": "topojson", "feature": "oceans"}
              },
              "mark": {"type": "geoshape", "fill": "skyblue"}
            },
            {
              "data": {
                "url": "https://raw.githubusercontent.com/stak0015/climate-change-datasets/refs/heads/main/yearly-average-surface-temperature.csv"
              },
              "transform": [
                {
                  "lookup": "ISO_Code",
                  "from": {
                    "data": {
                      "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
                      "format": {
                        "type": "topojson", 
                        "feature": "ne_110m_admin_0_countries"
                        }
                    },
                  "key": "properties.ISO_A3"
                  },
                  "as": "geo"
                },
                {
                  "filter": "datum.Year == Year_selection"
                }
              ],
              "mark": {
                "type": "geoshape", 
                "stroke": "white"
              }, 
              "encoding": {
                "shape": {"field": "geo", "type": "geojson"},
                "color": {
                  "field": "Temperature",
                  "type": "quantitative",
                  "scale": {"domain": [0, 30], "scheme": "redblue", "reverse": true, "clamp": true},
                  "legend": {"format": ".2s"}
                },
                "tooltip": [
                  {"field": "Country", "type": "nominal", "title": "Country"},
                  {
                    "field": "Temperature",
                    "type": "quantitative",
                    "title": "Annual Surface Tempearture",
                    "format": ","
                  },
                  {"field": "Year", "type": "quantitative", "title": "Year"}
                ]
              }
            }
          ],
          "config": {}
        }; 
        vegaEmbed('#choropleth_map', vis1, {mode: "vega-lite"}).then(console.log).catch(console.warn);;
      </script>
    </div>
  </div>
    
  <br>

  <div class="centered_container">
      <div>
      <h2>Rising CO2 Emissions across the Globe</h2>
      </div>
      <div>
      <p>Rising CO2 emissions are at the core of climate change, as carbon dioxide is the primary greenhouse gas contributing to global warming. 
          Human activity such as burning fossil fuels release large amounts of CO2 into the atmosphere, which traps heat from the sun, creating a
          "greenhouse effect" that warms the planet. Over the past few decades, global CO2 emissions have continued to grow, with no signs of decreasing any time soon. While North America and Europe have started 
      the shift towards renewable energy and EVs - hence the recent decreasing trend - emissions from other regions continue to show a steady increase.</p>
      </div>
    <div id="area_chart" class="centered_div">
      <script>
        const vis2 = {
          "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
          "data": {
            "url": "https://raw.githubusercontent.com/stak0015/climate-change-datasets/refs/heads/main/co-emissions-per-capita.csv"
          },
          "vconcat": [
            {
              "width": 750,
              "height": 375,
              "title": "Annual CO2 Emissions per capita by Region (t)",
              "mark": "area",
              "encoding": {
                "x": {
                  "field": "Year",
                  "type": "temporal",
                  "scale": {"domain": {"param": "brush"}},
                  "axis": {"title": "", "tickCount": 10}
                },
                "y": {
                  "aggregate": "sum", 
                  "field": "Annual-co2-emissions-per-capita",
                  "title": "CO2 Emissions per capita (t)"
                  },
                "color": {
                  "field": "Entity", "scale": {"scheme": "plasma"}
                },
                "tooltip": [
                  {
                    "field": "Entity", 
                    "type": "nominal", 
                    "title": "Region:"
                  },
                  {
                    "field": "Year", 
                    "type": "temporal", 
                    "title": "Year:",
                    "format": "%Y"
                  },
                  {
                    "field": "Annual-co2-emissions-per-capita", 
                    "type": "quantitative", 
                    "title": "CO2 Emissions (t):"
                  }
                ]
              }
            },
            {
              "width": 750,
              "height": 75,
              "title": "Click and drag to filter data based on interval",
              "mark": "area",
              "params": [
                {"name": "brush", "select": {"type": "interval", "encodings": ["x"]}}
              ],
              "encoding": {
                "x": {"field": "Year", "type": "temporal", "axis": {"tickCount": 10}},
                "y": {
                  "aggregate": "sum",
                  "field": "Annual-co2-emissions-per-capita",
                  "title": "Emissions"
                },
                "color": {
                  "field": "Entity", "scale": {"scheme": "blues"},
                  "legend": {
                    "title": "Region"
                  }
                }
              }
            }
          ]
        };
        vegaEmbed('#area_chart', vis2, {mode: "vega-lite"}).then(console.log).catch(console.warn);;
      </script>
    </div>
  </div>

  <br>

  <div class="centered_container">
    <div id="stacked_bar_chart" class="centered_div">
      <script>
        const vis3 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/stak0015/climate-change-datasets/refs/heads/main/number-of-natural-disaster-events.csv"
  },
  "title": "Number of Natural Disaster Occurrences (1950-2024)",
  "width": 1000,
  "height": 500,
  "mark": {"type": "bar", "size": 12},
  "params": [
    {
      "name": "Selection",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All",
          "Drought",
          "Dry mass movement",
          "Earthquake",
          "Extreme heat",
          "Extreme temperature",
          "Flood",
          "Glacial lake outburst flood",
          "Volcanic activity",
          "Wet mass movement",
          "Wildfire"
        ],
        "name": "Disaster: "
      }
    }
  ],
  "transform": [
    {"filter": "datum.Year > 1949"},
    {"filter": "datum.Entity != 'Fog'"},
    {"filter": "Selection != 'All' ? datum.Entity == Selection : true"}
  ],
  "encoding": {
    "x": {
      "field": "Year",
      "type": "ordinal",
      "title": "Year",
      "axis": {"labelExpr": "datum.label % 5 == 0 ? datum.label : ''"}
    },
    "y": {
      "aggregate": "sum",
      "field": "Disasters",
      "type": "quantitative",
      "title": "Number of Occurrences"
    },
    "color": {
      "field": "Entity",
      "type": "nominal",
      "scale": {
        "scheme": "category20b"
      },
      "legend": {"title": "Natural Disaster"}
    },
    "tooltip": [
      {"field": "Entity", "type": "nominal", "title": "Disaster: "},
      {"field": "Year", "type": "quantitative", "title": "Year: "},
      {"field": "Disasters", "type": "quantitative", "title": "Occurrences: "}
    ]
  }
};
        vegaEmbed('#stacked_bar_chart', vis3, {mode: "vega-lite"}).then(console.log).catch(console.warn);;
      </script>
    </div>
  </div>

<br>

  <div class="centered_container">
    <div id="line_chart" class="centered_div">
      <script>
        const vis4 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Stock prices of 5 Tech Companies over Time.",
  "data": {"url": "https://raw.githubusercontent.com/stak0015/climate-change-datasets/refs/heads/main/ghg-emissions-by-sector.csv"},
  "title": "Annual Greenhouse Gas Emissions by Sector (1990-2020)",
  "width": 750,
  "height": 500,
  "layer": [
    {
      "mark": {
        "type": "line",
        "point": {
          "filled": false,
          "fill": "white"
        }
      }
    },
    {
      "transform": [
        {"filter": "datum.Year == 2020 && datum.Sector == 'Electricity-and-heat'"}
      ],
      "mark": {
        "type": "rect",
        "xOffset": -80,
        "yOffset": 68,
        "width": 170,
        "height": 90,
        "fill": "yellow",
        "fillOpacity": 0.2,
        "stroke": "black",
        "cornerRadius": 5
      },
      "encoding": {
        "text": {"field": "label"}
      }
    },
    {
      "transform": [
        {"filter": "datum.Year == 2020 && datum.Sector == 'Electricity-and-heat'"},
        {
          "calculate": "'Highest Sector'",
          "as": "label"
        },
      ],
      "mark": {
        "type": "text",
        "xOffset": -80,
        "yOffset": 45,
        "fontSize": 15,
        "lineBreak": "_",
        "lineHeight": 25,
        "fill": "black",
        "fontWeight": "bold"
        
      },
      "encoding": {
        "text": {"field": "label"}
      }
    },
    {
      "transform": [
        {"filter": "datum.Year == 2020 && datum.Sector == 'Electricity-and-heat'"},
        {
          "calculate": "'Electricity and heat'",
          "as": "label"
        },
      ],
      "mark": {
        "type": "text",
        "xOffset": -80,
        "yOffset": 70,
        "fontSize": 15,
        "lineBreak": "_",
        "lineHeight": 25,
        "fill": "black"
      },
      "encoding": {
        "text": {"field": "label"}
      }
    },
    {
      "transform": [
        {"filter": "datum.Year == 2020 && datum.Sector == 'Electricity-and-heat'"},
        {
          "calculate": "'(+75% between 1990-2020)'",
          "as": "label"
        },
      ],
      "mark": {
        "type": "text",
        "xOffset": -80,
        "yOffset": 90,
        "fontSize": 12,
        "lineBreak": "_",
        "lineHeight": 25,
        "fill": "red"
      },
      "encoding": {
        "text": {"field": "label"}
      }
    }
  ],
  "encoding": {
    "x": {"field": "Year", "type": "ordinal", "axis": {"labelExpr": "datum.label % 5 == 0 ? datum.label : ''"}},
    "y": {"field": "Emissions", "type": "quantitative", "title": "Greenhouse Gas Emissions (t)"},
    "color": {"field": "Sector", "type": "nominal"},
    "tooltip": [
      {"field": "Sector", "type": "nominal", "title": "Sector: "},
      {"field": "Year", "type": "ordinal", "title": "Year: "},
      {"field": "Emissions", "type": "quantitative", "title": "Annual Emissions (t): ", "format": ","}
    ]
  }
};
        vegaEmbed('#line_chart', vis4, {mode: "vega-lite"}).then(console.log).catch(console.warn);;
      </script>
    </div>
  </div>

    <br>

  <div class="centered_container">
    <div id="us_map" class="centered_div">
      <script>
        const vis5 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 750,
  "height": 500,
  "title": "Sea Level Change along the US Coasts (1960-2023)",
  "projection": {"type": "albersUsa", "translate": [{"signal": "x"}, {"signal": "y"}], "scale": {"expr": "zoom_level"}},
  "background": "white",
  "params": [
    {
      "name": "zoom_level",
      "value": 900,
      "bind": {
        "input": "range",
        "min": 900,
        "max": 2000,
        "step": 100,
        "name": "Zoom: "
      }
    },
    {
      "name": "x",
      "value": 375,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 1000,
        "step": 10,
        "name": "X: "
      }
    },
    {
      "name": "y",
      "value": 250,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 500,
        "step": 10,
        "name": "Y: "
      }
    }
  ],
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/vega/vega/refs/heads/main/docs/data/us-10m.json",
        "format": {"type": "topojson", "feature": "states"}
      },
      "mark": {"type": "geoshape", "fill": "#777e6e", "stroke": "white"}
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/stak0015/climate-change-datasets/refs/heads/main/us-sea-level-change.csv"
      },
      "transform": [
        {
          "filter": "datum.Latitude >= 24.396308 && datum.Latitude <= 49.384358 && datum.Longitude >= -125.0 && datum.Longitude <= -66.93457 || datum.State == 'Alaska' || datum.State == 'Hawaii'"
        },
        {
          "calculate": "abs(datum['Relative-sea-level-change'])",
          "as": "deviation"
        },
        {
          "calculate": "format(datum['Relative-sea-level-change'], '0.2f') + 'mm'",
          "as": "sea-level-change"
        }
      ],
      "mark": {"type": "text", "font": "Consolas", "stroke": "white", "strokeWidth": 0.5},
      "encoding": {
        "longitude": {"field": "Longitude", "type": "quantitative"},
        "latitude": {"field": "Latitude", "type": "quantitative"},
        "size": {
          "field": "deviation",
          "type": "quantitative",
          "scale": {"domain": [0, 20], "range": [30, 60], "clamp": true},
          "legend": {"title": "Absolute change (mm)"}
        },
        "text": {
          "condition": {
            "test": "toNumber(datum['Relative-sea-level-change']) < 0",
            "value": "↓"
          },
          "value": "↑"
        },
        "color": {
          "field": "Relative-sea-level-change",
          "type": "quantitative",
          "scale": {
            "domain": [-20, 20],
            "range": [
              "#6863AD",
              "#77B2DD",
              "#AFD8B0",
              "#F3EB3A",
              "#F49B4F",
              "#EC4A4E"
            ],
            "clamp": true
          },
          "legend": {"title": "Sea level change (mm)"}
        },
        "tooltip": [
          {"field": "State", "title": "State: "},
          {"field": "Location", "title": "Location: "},
          {"field": "sea-level-change", "title": "Sea level change: "}
        ]
      }
    }
  ]
};
        vegaEmbed('#us_map', vis5, {mode: "vega-lite"}).then(console.log).catch(console.warn);;
      </script>
    </div>
  </div>

    <br>

  <div class="centered_container">
    <div id="line_chart2" class="centered_div">
      <script>
        const vis6 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Google's stock price over time.",
  "data": {"url": "https://raw.githubusercontent.com/stak0015/climate-change-datasets/refs/heads/main/global-sea-level-change.csv"},
  "title": "Global sea level change (1880-2023)",
  "width": 750,
  "height": 500,
  "transform": [
    {
      "calculate": "datum.Attribute == 'Adjusted-sea-level' ? 'Adjusted sea level' : datum.Attribute == 'Lower-error-bound' ? 'Lower error bound' : datum.Attribute == 'Upper-error-bound' ? 'Upper error bound' : 'Satellite measurements'",
      "as": "Category"
    },
    {
      "calculate": "format(datum['Sea-level-change'], '.2f') + 'mm'",
      "as": "Sea"
    }
  ],
  "mark": {"type": "line", "interpolate": "linear"},
  "encoding": {
    "x": {"field": "Year", "type": "ordinal", "axis": {
      "labelExpr": "datum.label % 5 == 0 ? datum.label : ''",
      "ticks": false
    }},
    "y": {"field": "Sea-level-change", "type": "quantitative"},
    "color": {"field": "Category"},
    "tooltip": [
      {"field": "Year", "title": "Year: "},
      {"field": "Category", "title": "Category: "},
      {"field": "Sea", "title": "Sea level change: "}
    ]
  }
};
        vegaEmbed('#line_chart2', vis6, {mode: "vega-lite"}).then(console.log).catch(console.warn);;
      </script>
    </div>
  </div>

</body>
</html>
